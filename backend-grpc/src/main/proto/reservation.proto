syntax = "proto3";

option java_multiple_files = true;
option java_package = "com.hotel.reservation.grpc";
option java_outer_classname = "ReservationServiceProto";

package reservation;

import "google/protobuf/timestamp.proto";

// Service definition
service ReservationService {
  rpc CreateReservation(CreateReservationRequest) returns (ReservationResponse);
  rpc GetReservation(GetReservationRequest) returns (ReservationResponse);
  rpc UpdateReservation(UpdateReservationRequest) returns (ReservationResponse);
  rpc DeleteReservation(DeleteReservationRequest) returns (DeleteReservationResponse);
  rpc GetAllReservations(GetAllReservationsRequest) returns (ReservationList);
  rpc CancelReservation(CancelReservationRequest) returns (ReservationResponse);
}

// Enums
enum ReservationStatus {
  PENDING = 0;
  CONFIRMED = 1;
  CANCELLED = 2;
  COMPLETED = 3;
}

enum RoomType {
  SINGLE = 0;
  DOUBLE = 1;
  SUITE = 2;
  DELUXE = 3;
}

// Messages
message CreateReservationRequest {
  int64 client_id = 1;
  int64 room_id = 2;
  string check_in_date = 3;  // Format: YYYY-MM-DD
  string check_out_date = 4; // Format: YYYY-MM-DD
  int32 number_of_guests = 5;
  string special_requests = 6;
  ReservationStatus status = 7;
}

message GetReservationRequest {
  int64 id = 1;
}

message UpdateReservationRequest {
  int64 id = 1;
  int64 client_id = 2;
  int64 room_id = 3;
  string check_in_date = 4;
  string check_out_date = 5;
  int32 number_of_guests = 6;
  string special_requests = 7;
  ReservationStatus status = 8;
}

message DeleteReservationRequest {
  int64 id = 1;
}

message DeleteReservationResponse {
  bool success = 1;
  string message = 2;
}

message GetAllReservationsRequest {
  // Empty for now, can add pagination later
}

message CancelReservationRequest {
  int64 id = 1;
}

message ReservationList {
  repeated ReservationResponse reservations = 1;
}

message ReservationResponse {
  int64 id = 1;
  ClientInfo client = 2;
  RoomInfo room = 3;
  string check_in_date = 4;
  string check_out_date = 5;
  int32 number_of_guests = 6;
  double total_price = 7;
  ReservationStatus status = 8;
  string special_requests = 9;
  google.protobuf.Timestamp created_at = 10;
  google.protobuf.Timestamp updated_at = 11;
}

message ClientInfo {
  int64 id = 1;
  string first_name = 2;
  string last_name = 3;
  string email = 4;
  string phone = 5;
}

message RoomInfo {
  int64 id = 1;
  string room_number = 2;
  RoomType room_type = 3;
  double price_per_night = 4;
  int32 capacity = 5;
  repeated string amenities = 6;
}
